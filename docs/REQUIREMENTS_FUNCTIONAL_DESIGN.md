# 要件定義書兼機能設計書 (オフライン対応版)

## 1. 概要

日本拳法の試合における得点や反則、試合時間をリアルタイムで表示・管理するためのWebアプリケーション。
Presentation APIを利用して、操作画面とは別のモニターに得点板を全画面表示することを目的とする。

**本システムは、試合運営の安定性を確保するため、試合進行中はオフライン（インターネット接続なし）で動作することを前提とした「ローカルファースト」アーキテクチャを採用する。**

## 2. システム構成

- **フロントエンド**: React, Next.js
- **データベース (クラウド)**: Firebase (Firestore) - マスターデータおよびバックアップ
- **データベース (ローカル)**: **Dexie.js (IndexedDB Wrapper)** - 試合進行中のデータ保存場所
- **認証**: Firebase Authentication
- **リアルタイム連携**: Firestore Realtime Listeners (オンライン時のみ)
- **外部モニター表示**: Presentation API

## 3. データ定義

各試合で表示・管理するデータは以下の通り。

### 選手A/選手B

- **所属名**: チーム名
- **選手名**: 姓のみ
- **得点**: 0, 1, 2 のいずれか。2点先取で試合終了。
- **反則**: 無し → 黄 → 赤 → 赤+黄 → 赤+赤 の5段階

### 反則と得点の自動連動ロジック

- 反則状態が `赤` になった瞬間に、相手選手の得点が自動で +1 される
- 同様に、`赤` or `赤+黄` → `赤+赤` へ状態が変更された際も、相手選手の得点が自動で +1 される
- 逆に、反則状態が戻された場合（例: `赤` → `黒`）は、相手選手の得点が自動で -1 される
- `赤+赤` の状態になると合計で相手に2点が加算され、ルール上試合終了となる

### その他の情報

- **大会名**
- **大会形式**: 個人戦 or 団体戦
- **コート名**
- **何試合目か**
- **試合時間**: カウントダウン形式のタイマー
- **同期ステータス**: 未送信 / 送信済み（ローカルDB管理用）

## 4. 画面構成

アスタリスク(\*)が付いている画面は、認証なしでアクセス可能。
階層になっているのは、その画面から遷移できることを示している。
試合一覧画面、試合の組み合わせ設定画面、チーム・選手管理画面はタブで切り替え。
画面上部にヘッダーを配置。

### 画面一覧

- ログイン画面
  - パスワード再設定画面
- 試合一覧画面
  - モニター操作画面 **(オフライン対応)**
    - 表示用モニター画面 **(オフライン対応)**
  - 手動モニター操作画面 **(オフライン対応・新規追加)**
- 試合の組み合わせ設定画面 **(オンライン必須)**
- チーム・選手管理画面 **(オンライン必須)**
  - 登録内容編集画面
- 大会設定画面
- \*選手登録フォーム画面
- \*選手登録完了画面
- 組織管理画面(システム管理者のみアクセス可能)

### ヘッダー

- ヘッダーにタブを配置
- 右端に歯車ボタンを配置
  - 大会設定画面へ遷移ボタン
  - ログアウトボタン
- 歯車ボタンの左に大会名を表示
- 左上にロゴを配置（タップで試合一覧画面へ遷移）
- 大会名のドロップダウンボタン表示
  - 現在選択されている大会名を表示するドロップダウンメニュー（例: [ 第50回全国日本拳法大会 ▼ ]）
  - このドロップダウンメニューから大会を選択すると、その瞬間にシステム全体（試合一覧画面など）で表示・操作対象となるアクティブな大会が切り替わる。
  - 選択された大会IDは、`LocalStorage`に永続化し、グローバルな状態で保持。（詳細は6. 横断的要件を参照）
  - ドロップダウンメニューの最下部などに「大会を管理...」といった項目を設け、大会設定画面へ遷移できるように。

## 5. 各画面機能詳細

### ログイン画面

- メールアドレスとパスワードでログイン認証を行う
- パスワード再設定画面へのリンクを設置する

### パスワード再設定画面

- 登録済みのメールアドレスを入力し、パスワード再設定用のメールを送信する
- 送信後、「（入力したメールアドレス）に再設定メールを送信しました。」というメッセージを表示する

### 試合一覧画面

- 画面上部に大会名を表示する
- 各試合の情報をテーブル形式で表示する
- **ローカルDBとFirestoreのデータ連携操作を行う重要画面**

#### データ取得・同期機能 **(新規追加)**

1.  **「試合データを取得（ダウンロード）」ボタン**:
    - オンライン時に押下可能。
    - Firestoreから最新の試合組み合わせデータ（`matches`）を取得し、ブラウザのローカルDB（IndexedDB）に保存・上書きする。
    - 取得完了後、「オフラインモードで運用可能です」という旨のトーストを表示する。

2.  **「結果を送信（同期）」ボタン**:
    - ローカルDB内に「未送信（`isSynced: false`）」の試合結果が存在する場合のみ、目立つ色で表示される。
    - オンライン時に押下すると、未送信の試合結果データをFirestoreに一括送信（Batch Write）する。
    - 送信成功後、ローカルDBのステータスを「送信済み」に更新する。

#### 表示項目

コート名｜回戦｜選手A所属｜選手A名｜選手B所属｜選手B名｜得点｜ステータス｜操作画面への遷移ボタン

- **表示ロジック**: matchesコレクションに保存されている各IDを基に、対応する名前を取得して表示
  - `courtId` → tournamentsのcourts配列から`courtName`を取得
  - `roundId` → tournamentsのrounds配列から`roundName`を取得
  - `teamId` → teamsコレクションから`teamName`を取得
  - `playerId` → teamsのplayers配列から`displayName`を取得

- **ステータス表示**:
  - 未実施
  - 完了（未送信）: ローカルには保存済みだが、サーバー未反映（アイコン等で強調表示）
  - 完了（送信済）: サーバー反映済み

#### 勝敗表示

- 試合の得点に応じて、選手名と所属名の文字色を変更する
  - **勝利している選手**: 青色
  - **引き分け**: 両選手とも水色

#### 団体戦の場合の表示 **(新規追加)**

- **チーム対戦一覧**:
    - 初期表示では、チーム同士の対戦（MatchGroup）を一覧表示する。
    - 表示項目: コート名｜回戦｜チームA名｜チームB名｜詳細ボタン（→）
    - **表示ロジック**: matchGroupsの`courtId`/`roundId`/`teamAId`/`teamBId`から各名前を取得して表示
- **詳細表示（ドリルダウン）**:
  - 詳細ボタン（→）または行をクリックすると、そのチーム対戦内の個人試合一覧を表示する（URLパラメータに `matchGroupId` を付与）。
  - この時の表示形式は、個人戦の試合一覧テーブルと同様。
  - ヘッダーの大会名の横に「チームA vs チームB」のように対戦カードを表示する。

### モニター操作画面 **(オフライン対応)**

試合一覧画面から遷移し、Presentation APIで接続された別モニターの表示を操作する。
**この画面は、原則としてローカルDB（IndexedDB）のデータを読み書きし、Firestoreへの直接アクセスは行わない。**

#### データフローと状態管理

##### 初期データの取得

試合一覧画面から遷移した際、**ローカルDB**から以下のデータを読み込み初期表示する:

- 試合id
- 選手情報
- 得点
- 反則
- 大会・コート・回戦

##### ローカル状態での管理

- 読み込んだデータ、および「タイマー」「公開/非公開」の状態は、すべてモニター操作画面コンポーネントのローカル状態で管理する
- 試合中のすべての操作（得点、反則、タイマー開始/停止）は、ローカル状態のみを更新し、表示用モニターへ送信する

##### 表示用モニターへのリアルタイム連携

- 表示用モニター画面（Presentation APIで開いた別ウィンドウ）とは、APIの通信機能（postMessageなど）で直接接続する
- ローカル状態（得点、タイマーなど）が変更されるたびに、即座に最新の状態データを表示用モニター画面に送信し、表示をリアルタイムで更新させる

#### 表示・操作項目

- **選手情報 (A/B)**: 所属名、選手名を表示
- **得点**: (0, 1, 2) のボタンでローカル状態を変更可能
- **反則**: 5種類の状態（無し、黄、赤、赤+黄、赤+赤）をタップしてローカル状態を変更する。状態変更に伴う相手の得点増減ロジックもローカルで処理する
- **試合時間**: ドラムロールUIでローカル状態のタイマー値を設定可能（停止中のみ）
- **タイマー状態**: 「動作中」「停止中」ボタンでローカル状態を操作する。ローカルのタイマーが0秒になると自動で「停止中」になる
- **表示切替**: 「公開」「非公開」トグルスイッチでローカル状態を制御する

#### キーボード操作対応
- 概要: キーボード入力で得点, 反則, タイマー制御を可能とする
- 誤操作を防ぐため、同じキーを2回連続押すことで発動する
- タイマー
  - space: タイマーの開始, 停止をトリガー
- 選手パネル
  - A or B: 次に操作する選手を選択
  - S: 得点をインクリメント
  - z: 反則をインクリメント

#### 団体戦の場合の追加機能

- **「試合確定」/「次の試合へ」ボタン**:
  - 団体戦の試合進行中のみ表示され、状態によって機能が切り替わる。
  - **「試合確定」ボタン**（試合進行中）:
    1. 現在の試合結果を保存する。
    2. モニター表示画面を「試合結果発表モード」に切り替え、直前の試合結果を表示する。
    3. MatchGroup内の全試合が終了した場合、モニター表示画面を「団体戦最終結果モード」に切り替え、全試合の結果一覧を表示する。
  - **「次の試合へ」ボタン**（結果発表中）:
    1. 操作画面は、同じ対戦カード（MatchGroup）内の次の試合（sortOrder順）のデータを読み込み、操作可能な状態にする。
    2. モニターの公開状態を「非公開」に設定する（モニターは準備中画面になる）。
    3. **代表戦（6試合目）の判定ロジック**:
    - 5試合目（大将戦）終了時点で、チームの勝敗数が同数（引き分け）の場合のみ、6試合目（代表戦）を実施する。
    - 5試合目終了時点で勝敗が決している場合は、6試合目は行わず、そのまま「団体戦最終結果モード」へ移行する。

#### 保存処理 **(変更)**

**試合結果保存ボタン**:
- このボタンを押すと、その時点でのローカル状態（最終的な得点、反則）を **ローカルDB（IndexedDB）** の該当レコードに上書き保存する。
- 保存時、そのレコードの同期フラグを `isSynced: false` （未送信）に設定する。
- Firestoreへの直接通信は行わない（オフラインでもエラーにならない）。
- 保存完了後、試合一覧画面へ戻る。

### 表示用モニター画面 **(オフライン対応)**

- Presentation APIを使用し、PCに接続された別モニターに全画面表示する
- モニター操作画面のローカル状態から直接送信されるデータ（得点、反則、タイマー、公開状態）を、Presentation APIの通信機能（onmessageなど）を介してリアルタイムで受信し、画面に反映する
- この画面はDB（Firestore/Local両方）へのアクセスを持たず、データの表示に徹する
- モニター操作画面から送られてきた状態が「非公開」の場合、「準備中」などのメッセージを表示する

#### 表示モード

モニター表示画面は、操作画面からの指示により以下のモードを切り替えて表示する。

1.  **スコアボードモード**: 通常の試合進行画面。
2.  **試合結果発表モード**: 直前の試合の勝者、スコア、反則状況などを大きく表示する。
3.  **団体戦最終結果モード**: 団体戦の全試合終了時に、チーム対戦の結果一覧を表示する。

### 手動モニター操作画面 **(オフライン対応)**

既存の試合データを使用せず、その場でチーム名や選手名を入力してモニター表示を行うための画面。
練習試合や、システムに登録されていないエキシビションマッチなどでの利用を想定。

#### 機能
- **選手名・チーム名の直接入力**: 画面上のテキストフィールドから、選手A/Bの名前とチーム名を直接入力・編集できる。
- **基本機能の利用**: 得点、反則、タイマー、モニター接続（Presentation API）などの基本機能は、通常のモニター操作画面と同様に利用可能。
- **制限事項**:
  - 試合結果の保存機能はない。
  - 大会名、コート名、ラウンド名の表示機能はない。
  - 団体戦モード（試合確定、次の試合へなど）は使用できない。

### 大会設定画面
- 大会の「編集」「新規追加」「削除」を行うための専用管理画面。
- `tournaments`コレクションの全データを読み込み、初期表示します。

#### UI構成
**画面左側（大会一覧エリア）:**
- 既存の大会名をタブ形式（またはリスト形式）で一覧表示。
- このタブ/リストを選択する操作は、あくまで右側に表示する編集対象を切り替えるためのもの。（アクティブな大会の切り替えはヘッダーで行う）
- 一覧の下部（または上部）に「＋ 新しい大会を追加」ボタンを配置。

**画面右側（大会詳細フォーム）:**
- 左側で選択された大会の「変更可能な情報」をフォームに表示。
- 「新しい大会を追加」が押された場合は、空のフォームを表示。
- フォームの右上に「保存」ボタンを配置。

#### 変更可能な情報
- 大会名: テキストフィールド
- 開催日: 日付ピッカー（時間は不要、日付のみをtimestamp型で保存）
- 開催場所: テキストフィールド
- 大会概要: テキストエリア（複数行入力可能、自由記述で大会の詳細情報を記載）
- デフォルト試合時間: ドラムロールUI。表示は「59:59」形式だが、保存時は秒に換算。
- 会場のコート情報: テキストフィールドをリストで表示。追加・削除可能。
- **大会形式**: ドロップダウンで「個人戦」「団体戦」を選択可能。（保存: string）

### \*選手登録フォーム画面

- 認証不要で誰でもアクセス可能な選手登録ページ
- ページを離れようとした場合（戻るボタン、リロードなど）、「入力内容が破棄されますがよろしいですか？」といった確認ダイアログを表示する

#### 入力フォーム

- **代表者名**
- **代表者電話番号**
- **代表者メールアドレス**
- **チーム名（所属名）**
- **参加選手名**
  - 姓と名の間に半角スペースを入力。そのため、テキストフィールドは1つのみ
  - 「選手を追加」ボタンで入力欄を増やせる
- **備考欄（自由入力）**

※備考欄以外必須項目

#### 確認機能

- 画面下部に「内容を確認」ボタンを配置
- 押すと、選手登録確認ダイアログが表示される
- 必須項目が入力されていなければ、項目下に赤色でエラー表示して、ダイアログは表示しない

### \*選手登録確認ダイアログ

- 入力された内容を表示して確認させる
- 参加選手名は、姓と名を分けて表示する
- 画面下部に「送信」ボタンを配置
- ボタンを押すと、fireStoreの'teams'に保存される（その際、displayNameは空欄で良い）
- 正常に保存出来れば、登録完了画面へ遷移する

### \*選手登録完了画面

- 選手登録フォームの送信後に表示されるページ
- 「登録申請が完了しました。入力内容をメールに送信しましたのでご確認ください。」といったメッセージを表示する
- 登録完了メールを送信する

### メール機能

#### 使用技術

- Firebase Cloud Function
- SendGrid

#### 実装詳細

- Firestoreのteamsコレクションに新しいドキュメントが追加されたことをトリガーとする
- SendGridを用いて、以下の内容のメールを送信する:

##### メール内容

- 「このメールは送信専用です」の趣旨
- 「以下の内容で登録申請が完了しました」の趣旨

##### 登録内容

- 代表者名
- 代表者電話番号
- 代表者メールアドレス
- チーム名（所属名）
- 参加選手名
- 備考欄

- 「変更やご不明点は運営担当者 〇〇 fugafuga@example.com 宛にお願い致します。」

### 試合の組み合わせ設定画面 **(オンライン必須)**

- 承認済みの選手情報から、試合の組み合わせを設定する
- 設定した内容はFirestoreの`matches`に保存する
- **この画面での操作は、整合性を保つためオンライン環境を必須とする**

#### UI

表形式で以下の項目を入力・選択する（Excelのような見た目を想定）:
コート名｜回戦｜選手A所属｜選手A表示名｜選手B所属｜選手B表示名

- **コート名**: tournamentsのcourts配列から選択（courtIdで保存、表示はcourtName）
- **回戦**: tournamentsのrounds配列から選択（roundIdで保存、表示はroundName）
- **選手所属**: teamsコレクションから選択（teamIdで保存、表示はteamName）
- **選手名**: 選択された所属のplayers配列から選択（playerIdで保存、表示はdisplayName）

#### 選手選択

- **所属**: 承認済みのチームをドロップダウンリストから選択する
- **選手名**: 所属が選択された後、その所属の選手がドロップダウンリストに表示される
- 所属を選択せずに選手名を選択しようとすると、「所属を先に選択してください」というトースト通知を表示する

#### その他機能

- 設定した組み合わせの編集および削除もこの画面で行える

#### 団体戦の場合のUI

1.  **チーム対戦設定（MatchGroup）**:
    - まず、対戦するチーム同士の組み合わせを設定する。
    - 入力項目: コート名｜回戦｜チームA｜チームB
    - **コート名**: tournamentsのcourts配列から選択（courtIdで保存）
    - **回戦**: tournamentsのrounds配列から選択（roundIdで保存）
    - **チームA/B**: teamsコレクションから選択（teamIdで保存）
    - 保存すると `matchGroups` コレクションに保存される。

2.  **個人試合設定（Matches）**:
    - 作成したチーム対戦を選択すると、その対戦内での個人試合（先鋒、次鋒など）を設定する画面が表示される。
    - この画面は個人戦のUIと同様だが、選択できる選手は選ばれたチーム（A/B）の選手に限定される。
    - コンフリクト管理機能は不要。
    - 各テーブルは専用の新しいコンポーネントを作成する。

### チーム・選手管理画面 **(オンライン必須)**

選手登録フォームから送信された申請内容を一覧で確認し、承認・管理する画面。

#### 表示形式

- 各申請をカード形式で一覧表示する
- **カード内情報**: 代表者名、電話番号、メールアドレス、所属名、選手数、承認状態
- カード内の選手数表示（例: 「選手数: 16人」）をタップすると、選手一覧が展開表示される

#### 操作

##### 承認状態の切替

- **非承認の場合**: 「承認」ボタンを表示。承認されると、displayNameを作成する関数を実行する
- **承認済みの場合**: 「承認前に戻す」ボタンを表示
- 各ボタンをタップすると確認ダイアログが表示され、「OK」を押すと状態が変更される（承認状態はDB上でtrue/falseのフラグで管理）

##### 編集

- 「編集」ボタンを押し、登録内容編集画面へ遷移する

### 登録内容編集画面

申請内容の詳細を編集する。

#### UI

- 承認状態、代表者名、電話番号、メールアドレス、所属名、選手名リスト（姓名を分けて姓名を横に並べ、1人1行で表示）が全てテキストフィールドで表示され、編集可能

#### 操作

- ヘッダーに「戻る」ボタンと「保存」ボタンを配置する
- フォーム内容が変更された状態でページを離れようとした場合（戻るボタン、リロードなど）、「編集内容が破棄されますがよろしいですか？」といった確認ダイアログを表示する

### 組織管理画面
1. 概要
システム全体を管理する特権ユーザー（システム管理者）が、本システムを利用する「組織（団体）」を新規に作成し、その組織の管理者アカウントを発行するための専用画面。

2. アクセス権限
導線: この画面は通常、ヘッダーのタブには表示されない。
表示条件: ログイン中のユーザーがシステム管理権限（例: usersドキュメントのisSystemAdminフィールドがtrue）を持つ場合のみ、ヘッダーに「組織管理」タブが表示され、アクセス可能となる。

3. 主な機能
A. 組織の新規作成と管理者アカウントの発行
UI: 以下の情報を入力するフォームを設置する。
- 団体名
- 団体代表者名
- 団体代表者 電話番号
- 団体代表者 メールアドレス (これが組織管理者のログインIDとなる)
- 初期パスワード

実行プロセス:
「作成」ボタンを押すと、フォーム内容がCloud Function（createOrganizationなど）に送信される。

Cloud Functionの処理:
a. アカウント発行: 送信されたメールアドレスとパスワードを基に、Firebase Authenticationで新しいユーザーアカウントを作成する。
b. 組織登録: 発行したアカウントのuidを取得し、organizationsコレクションに新しいドキュメントを作成する。このドキュメントには、入力された団体情報（団体名、代表者名など）と、発行した管理者のuidが保存される。

B. 組織一覧の表示 (将来実装)
このシステムに登録されている全ての組織を一覧で表示し、管理する機能。


### 保存時の処理 (Cloud Functionトリガー)

「保存」ボタンが押され、`teams`ドキュメントの`players`配列または`teamName`が変更された場合、onUpdateトリガーで以下のCloud Functionが実行される:

1. **displayNameの再計算**: 下記の「displayNameの作成方法」ロジックに基づき、チーム全員の`displayName`を再計算・保存する
2. **matchesの同期**: 変更された選手の`playerId`や`teamId`を使って`matches`コレクションを検索し、`playerA`または`playerB`に含まれる`displayName`や`teamName`を最新の情報に書き換える

### displayNameの作成方法 (Cloud Functionロジック)

Cloud Functionは、チームのplayers配列全体をチェックし、以下のロジックで全選手のdisplayNameを決定する:

1. まず、全選手のdisplayNameを「姓」で初期設定する
2. 次に、チーム内で「姓」が重複している選手グループを探す
3. 重複グループが見つかった場合、そのグループの選手全員のdisplayNameを「姓 + 半角スペース + 名の一部」に変更する

#### 例

- 山田 太郎、鈴木 一郎 → displayNameは「山田」「鈴木」
- 山田 太郎、山田 健太、鈴木 一郎 → displayNameは「山田 太」「山田 健」「鈴木」
- 山田 太郎、山田 健太、山田 太一 → displayNameは「山田 太郎」「山田 健」「山田太一」

## 6. 横断的要件

### 権限管理

ユーザーの権限（ロール）は以下の2種類に分離。

#### システム管理者:
- `organizations` コレクションの `isSystemAdmin` フィールドが true の特権ユーザー。
- 「組織管理画面」にアクセスでき、新しい組織と組織管理者アカウントを発行できる。

#### 組織管理者:

- 「組織管理画面」で発行された、各組織（団体）の管理者アカウント。
- 自身が所属する組織の大会管理（試合一覧、組み合わせ設定、チーム管理）のみ操作可能。
- 各コートでの操作（モニター操作画面）は、この「組織管理者」アカウントを共有して運用することを想定。


### グローバル状態管理 (アクティブな大会ID)
- ログイン中のユーザーが現在操作対象としている大会（アクティブな大会ID）は、以下のルールで管理します。
- 保存場所: ブラウザを閉じても状態を保持するため、`LocalStorage` に選択中の `tournamentId` を保存。
- 保存タイミング: ヘッダーの大会ドロップダウンで大会が選択・切り替えられた瞬間に、選択されたIDを `LocalStorage` に書き込む。
- 削除タイミング: ユーザーが「ログアウト」ボタンを押した際、Firebaseの認証情報と共に、`LocalStorage` から大会IDを削除。

#### ログイン時の必須チェック:
- ユーザーがログイン状態（認証済み）にも関わらず、`LocalStorage` にアクティブな大会IDが存在しない場合（例: 初回ログイン時、別端末でのログイン時、キャッシュクリア後）、他の画面操作をブロック。
- この状態の場合、画面全体にモーダルで「大会選択ダイアログ」を強制的に表示。
- ユーザーがダイアログで（所属組織の）大会を選択すると、そのIDがLocalStorageに書き込まれ、ダイアログが閉じて通常の操作が可能に。

### オフライン運用とデータ同期ルール

本システムは以下のフェーズに分けて運用されることを想定する。

#### フェーズ1: オンライン準備 (事前〜当日朝)
- **対象画面**: 選手登録フォーム、チーム・選手管理、試合組み合わせ設定
- **動作**: Firestoreに対して直接読み書きを行う。インターネット接続必須。
- **完了条件**: 全ての試合組み合わせが確定し、Firestoreに保存されていること。

#### フェーズ2: データ持ち出し (当日開始前)
- **対象画面**: 試合一覧画面
- **動作**: 「試合データを取得」ボタンを押下し、FirestoreのデータをローカルDBへ一括コピーする。
- **注意**: これ以降、フェーズ4の同期完了まで、別端末での組み合わせ変更などは行わない運用ルールとする。

#### フェーズ3: オフライン運用 (試合進行中)
- **対象画面**: 試合一覧画面、モニター操作画面、表示用モニター画面
- **動作**: ローカルDBのみを使用して試合を進行し、結果を保存する。インターネット接続は不要。
- **データ**: 保存された試合結果はローカルDB内で `isSynced: false` フラグが付与される。

#### フェーズ4: オンライン同期 (試合終了後)
- **対象画面**: 試合一覧画面
- **動作**: インターネットに接続し、「結果を送信」ボタンを押下。ローカルDBの `isSynced: false` のデータをFirestoreへアップロードする。

### エラーハンドリング

- 通信失敗時や不正な操作が行われた場合は、画面下部などにトースト通知を表示してユーザーに状態を伝える

### その他

- 選手をリストで表示する場合は、昇順で表示する