# 👀 レビュー観点 (コーディングルール準拠)

**レビューを行う際は、まず以下のルールに基づいたチェックリストを確認してください。**

---

## 設計とアーキテクチャ

- [ ] **1. 責務分離**: コンポーネントや関数は、単一の明確な責務を持っていますか？

- [ ] **2. ディレクトリ構造**: ファイルは所定のディレクトリ構造（`src/app`, `src/components`, `src/lib`, `src/types`等）に従って配置されていますか？

- [ ] **3. 状態管理**: 状態管理の使い分けは適切ですか？
  - **サーバー状態**（Firestoreからのデータ）: TanStack Query を使っていますか？
  - **グローバルなクライアント状態**: Zustand を使っていますか？
  - **ローカル状態**（useState）: 本当にそのコンポーネント内で閉じて良い状態ですか？

## 型安全性

- [ ] **4. `any`型の不使用**: `any`型は使われていませんか？ 型定義は`src/types/`にありますか？

- [ ] **5. Zodの活用**: 「選手登録フォーム」など、フォームのバリデーションには`react-hook-form` + `Zod`スキーマが使われていますか？

## UIとコーディングスタイル

- [ ] **6. UI構築**: UIは`Shadcn/ui`のコンポーネントをベースに構築されていますか？（独自スタイルの過度な適用は避ける）

- [ ] **7. 命名規則**: コンポーネント(PascalCase)、関数・変数(camelCase)、型(PascalCase)の命名規則は守られていますか？

- [ ] **8. コメント**: 複雑なロジック（displayName生成、反則と得点の連動など）には、その意図を説明するコメントが記載されていますか？

## パフォーマンスと堅牢性

- [ ] **9. Next.js最適化**: Server Component / Client Component の使い分けは最適ですか？（デフォルトをServer Componentとし、`"use client"`は必要最小限にする）

- [ ] **10. 再レンダリング**: 不要な再レンダリングは抑制されていますか？（TanStack QueryやZustandのセレクタを適切に使い、`React.memo`や`useCallback`は本当に必要な場面でのみ使用する）

- [ ] **11. エラーハンドリング**: Firestoreへの書き込み失敗時やAPIエラー時に、toast等を使用したユーザーへのフィードバックが実装されていますか？

## Firebase と 要件固有ロジック

- [ ] **12. Firestore連携**: Firestoreへのアクセスは`src/lib/firebase.ts`のインスタンス経由で行われていますか？

- [ ] **13. リアルタイム処理**: TanStack QueryでのonSnapshot利用時、アンマウント時のクリーンアップ処理（購読解除）は適切に行われていますか？

- [ ] **14. モニター連携**: 「モニター操作画面」から「表示用モニター画面」への状態連携（postMessage等）は、設計書通りのローカル状態で行われていますか？

- [ ] **15. Cloud Functions**: （もし該当する場合）displayName生成ロジックやmatches同期ロジックは、設計書通りの仕様を満たしていますか？

## テスト

- [ ] **16. テスト網羅性**: 重要なビジネスロジックに対するテストは追加・更新されていますか？
